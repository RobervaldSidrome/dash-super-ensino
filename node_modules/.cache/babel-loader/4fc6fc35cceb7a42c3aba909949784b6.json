{"ast":null,"code":"import _slicedToArray from \"/home/bex/dash-backup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/bex/dash-backup/src/components/ModalSelect.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Paper, Grid, List, ListItem, ListSubheader, ListItemText, IconButton, Collapse } from '@material-ui/core';\nimport { ArrowDropDown, ArrowRight } from '@material-ui/icons';\nimport { makeStyles } from '@material-ui/styles';\nvar styles = makeStyles({\n  paper: {\n    maxHeight: \"50vh\",\n    width: \"80vw\",\n    position: \"absolute\",\n    left: \"50%\",\n    marginLeft: \"-40vw\",\n    top: \"50%\",\n    marginTop: \"-25vh\",\n    overflow: \"auto\"\n  }\n});\n\nvar ModalSelect = function ModalSelect(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      distritos = _useState2[0],\n      setDistritos = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      data = _useState4[0],\n      setData = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      dropdown = _useState6[0],\n      setDropdown = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      step = _useState8[0],\n      setStep = _useState8[1];\n\n  useEffect(function () {\n    console.log(props);\n    var dropdown = [];\n    props.distritos.forEach(function (dist) {\n      dropdown.push({\n        id: dist.id,\n        state: false\n      });\n    });\n    setDropdown(dropdown);\n    setDistritos(props.distritos);\n    var value = sessionStorage.getItem('escolas');\n\n    if (value) {\n      setData(JSON.parse(value));\n    }\n  }, []);\n\n  function checkCollapse(id) {\n    var check = dropdown.find(function (op) {\n      return op.id === id;\n    });\n    return check.state;\n  }\n\n  function dropdownCollapse(id) {\n    var newState = dropdown.map(function (op) {\n      if (op.id === id) {\n        op.state = !op.state;\n      }\n\n      return op;\n    });\n    setDropdown(newState);\n  }\n\n  function selectDistrito(distri) {\n    var resultado = data.filter(function (esc) {\n      return esc.Distrito === distri.distrito;\n    });\n    var final = resultado.reduce(function (arr, curr) {\n      arr[\"Alunos em que foram implantados\"] = Number(arr[\"Alunos em que foram implantados\"]) + Number(curr[\"Alunos em que foram implantados\"]);\n      arr[\"Vídeos assistidos\"] = Number(arr[\"Vídeos assistidos\"]) + Number(curr[\"Vídeos assistidos\"]);\n      arr[\"Questões respondidas\"] = Number(arr[\"Questões respondidas\"]) + Number(curr[\"Questões respondidas\"]);\n      return arr;\n    });\n    final.Escola = distri.distrito;\n    setStep(true);\n    props.setData(final);\n  }\n\n  function selectEscola(escola) {\n    setStep(true);\n    props.setData(escola);\n  }\n\n  function end(type) {\n    props.setType(type);\n    props.setSelected(true);\n    props.open();\n  }\n\n  var classes = styles();\n  return React.createElement(Paper, {\n    className: classes.paper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, step ? React.createElement(List, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(ListItem, {\n    button: true,\n    onClick: function onClick() {\n      end(\"grafico\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"Gr\\xE1fico\"), React.createElement(ListItem, {\n    button: true,\n    onClick: function onClick() {\n      end(\"cards\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, \"Dados\")) : React.createElement(List, {\n    subheader: React.createElement(ListSubheader, {\n      component: \"div\",\n      id: \"nested-list-subheader\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"Distritos\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, Array.from(distritos).map(function (dist) {\n    return React.createElement(List, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(ListItem, {\n      onClick: function onClick() {\n        dropdownCollapse(dist.id);\n      },\n      button: true,\n      key: dist.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(ListItemText, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, dist.distrito), React.createElement(IconButton, {\n      style: {\n        float: 'right'\n      },\n      edge: \"end\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, checkCollapse(dist.id) ? React.createElement(ArrowDropDown, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }) : React.createElement(ArrowRight, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }))), React.createElement(Collapse, {\n      in: checkCollapse(dist.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(ListItem, {\n      button: true,\n      onClick: function onClick() {\n        return selectDistrito(dist);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"VER DADOS DO DISTRITO\"), // eslint-disable-next-line\n    data.map(function (esco) {\n      if (esco.Distrito === dist.distrito) {\n        return React.createElement(List, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, React.createElement(ListItem, {\n          button: true,\n          onClick: function onClick() {\n            return selectEscola(esco);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }, esco.Escola));\n      }\n    })));\n  }))));\n};\n\nexport default ModalSelect;","map":{"version":3,"sources":["/home/bex/dash-backup/src/components/ModalSelect.js"],"names":["React","useEffect","useState","Paper","Grid","List","ListItem","ListSubheader","ListItemText","IconButton","Collapse","ArrowDropDown","ArrowRight","makeStyles","styles","paper","maxHeight","width","position","left","marginLeft","top","marginTop","overflow","ModalSelect","props","distritos","setDistritos","data","setData","dropdown","setDropdown","step","setStep","console","log","forEach","dist","push","id","state","value","sessionStorage","getItem","JSON","parse","checkCollapse","check","find","op","dropdownCollapse","newState","map","selectDistrito","distri","resultado","filter","esc","Distrito","distrito","final","reduce","arr","curr","Number","Escola","selectEscola","escola","end","type","setType","setSelected","open","classes","Array","from","float","esco"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Paper, Grid, List, ListItem, ListSubheader, ListItemText, IconButton, Collapse } from '@material-ui/core'\nimport { ArrowDropDown, ArrowRight } from '@material-ui/icons'\nimport { makeStyles } from '@material-ui/styles'\n\n\nconst styles = makeStyles({\n    paper: {\n        maxHeight: \"50vh\",\n        width: \"80vw\",\n        position: \"absolute\",\n        left: \"50%\",\n        marginLeft: \"-40vw\",\n        top: \"50%\",\n        marginTop: \"-25vh\",\n        overflow: \"auto\"\n    }\n})\n\n\nconst ModalSelect = (props) => {\n    const [distritos, setDistritos] = useState([])\n    const [data, setData] = useState([])\n    const [dropdown, setDropdown] = useState([])\n    const [step, setStep] = useState(false)\n\n    useEffect(() => {\n        console.log(props)\n        const dropdown = []\n        props.distritos.forEach(dist => {\n            dropdown.push({ id: dist.id, state: false })\n        })\n        setDropdown(dropdown)\n        setDistritos(props.distritos)\n        const value = sessionStorage.getItem('escolas')\n        if (value) {\n            setData(JSON.parse(value))\n        }\n    }, [])\n\n    function checkCollapse(id) {\n        const check = dropdown.find(op => {\n            return op.id === id\n        })\n        return check.state\n    }\n\n    function dropdownCollapse(id) {\n        const newState = dropdown.map(op => {\n            if (op.id === id) {\n                op.state = !op.state\n            }\n            return op\n        })\n        setDropdown(newState)\n    }\n\n    function selectDistrito(distri) {\n        const resultado = data.filter(esc => {\n            return esc.Distrito === distri.distrito\n        })\n        let final = resultado.reduce((arr, curr) => {\n            arr[\"Alunos em que foram implantados\"] = Number(arr[\"Alunos em que foram implantados\"]) + Number(curr[\"Alunos em que foram implantados\"])\n            arr[\"Vídeos assistidos\"] = Number(arr[\"Vídeos assistidos\"]) + Number(curr[\"Vídeos assistidos\"])\n            arr[\"Questões respondidas\"] = Number(arr[\"Questões respondidas\"]) + Number(curr[\"Questões respondidas\"])\n            return arr\n        })\n        final.Escola = distri.distrito\n        setStep(true)\n        props.setData(final)\n    }\n    function selectEscola(escola) {\n        setStep(true)\n        props.setData(escola)\n\n    }\n    function end(type) {\n        props.setType(type)\n        props.setSelected(true)\n        props.open()\n    }\n    const classes = styles()\n    return (<Paper className={classes.paper} >\n        <Grid>\n            {step ? (<List>\n                <ListItem button={true} onClick={() => { end(\"grafico\") }}>\n                    Gráfico\n                </ListItem>\n                <ListItem button={true} onClick={() => { end(\"cards\") }}>\n                    Dados\n                </ListItem>\n            </List>) : (\n                    <List\n                        subheader={\n                            <ListSubheader component=\"div\" id=\"nested-list-subheader\">\n                                Distritos\n                      </ListSubheader>}\n                    >\n                        {Array.from(distritos).map(dist =>\n                            (\n                                <List>\n                                    <ListItem onClick={() => { dropdownCollapse(dist.id) }} button={true} key={dist.id}>\n                                        <ListItemText >\n                                            {dist.distrito}\n                                        </ListItemText>\n\n                                        <IconButton style={{ float: 'right' }} edge='end' >\n                                            {checkCollapse(dist.id) ? (<ArrowDropDown />) : (<ArrowRight />)}\n                                        </IconButton>\n                                    </ListItem>\n                                    <Collapse in={checkCollapse(dist.id)}>\n                                        <ListItem\n                                            button={true} onClick={() => selectDistrito(dist)}>VER DADOS DO DISTRITO</ListItem>\n                                        {// eslint-disable-next-line\n                                            data.map(esco => {\n                                                if (esco.Distrito === dist.distrito) {\n                                                    return (\n                                                        <List>\n                                                            <ListItem button={true} onClick={() => selectEscola(esco)}>\n                                                                {esco.Escola}\n                                                            </ListItem>\n                                                        </List>\n                                                    )\n                                                }\n                                            })}\n                                    </Collapse>\n                                </List>\n                            ))}\n                    </List>)}\n        </Grid>\n    </Paper>)\n}\n\n\nexport default ModalSelect"]},"metadata":{},"sourceType":"module"}